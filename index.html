<!DOCTYPE html>
<html lang="en">
 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
	  <script src="https://cdn.jsdelivr.net/gh/xaoxuu/volantis@1/js/volantis.min.js"></script>
	  <script src="https://old.cz5h.com/js/valine-min.js" charset="utf-8" type="text/javascript"></script>
	  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Hello!</title>
<style>
  /* bubble style */
        .sender{
            clear:both;
        }
        .sender div:nth-of-type(1){
            float: left;
        }
        .sender div:nth-of-type(2){
            background-color: #b3e1ff;
            float: left;
            margin: 0 20px 10px 15px;
            padding: 9px 15px 0px 0px;
            border-radius:7px;
        }
 
        .receiver div:first-child img,
        .sender div:first-child img{
            width:40px;
            height: 40px;
            border-radius:5px;
        }
 
        .receiver{
            clear:both;
        }
        .receiver div:nth-child(1){
            float: right;
        }
        .receiver div:nth-of-type(2){
            float:right;
            background-color: #b3e1ff;
            margin: 0px 15px 10px 20px;
            padding: 10px 0px 0px 12px;
            border-radius:7px;
        }
        .rname{
            float:right;
            font-size: 10px;
            margin-right:15px;
        }
        .lname{
            float:left;
            font-size: 10px;
            margin-left:15px;
        }
  
        .left_txt{
            float:left;
            position: relative;
            z-index: 9999;
        }

        .right_txt{

        }
  
        .left_triangle{
            float:left;
            height:0px;  
            width:0px;  
            border-width:15px;  
            border-style:solid;  
            border-color:#b3e1ff transparent  transparent  transparent;  
            position: relative;
            z-index: -1;
            left:-11px;
            top:-3px;
        }
 
        .right_triangle{
            height:0px;  
            width:0px;  
            border-width:15px;  
            border-style:solid;  
            border-color:#b3e1ff transparent transparent transparent;  
            position: relative;
            right:-11px;
            top:-3px;
        }
 
  </style>

<div class="sender">
      <div>
          <img src="http://q1.qlogo.cn/g?b=qq&nk=1805984583&s=640">
      </div>
  <span class="lname">管梨园</span><br>
  <div>
      <div class="left_triangle"></div>
      <span class="left_txt"> hello, man! </span>
   </div>
  </div>
<!-- Right -->
  <div class="receiver">
      <div>
          <img src="http://q1.qlogo.cn/g?b=qq&nk=1075625244&s=640">
      </div>
    <span class="rname">管梨园</span><br>
   <div>
     
        <div class="right_triangle"></div>
        <span> hello world </span>
   </div>
  </div>    
<div class="sender">
      <div>
          <img src="http://q1.qlogo.cn/g?b=qq&nk=1805984583&s=640">
      </div>
  <div>
      <div class="left_triangle"></div>
      <span> hello, man! </span>
   </div>
  </div>
<!-- Right -->
  <div class="receiver">
      <div>
          <img src="http://q1.qlogo.cn/g?b=qq&nk=1075625244&s=640">
      </div>
   <div>
        <div class="right_triangle"></div>
        <span> hello world </span>
   </div>
  </div> 
	<hr style="margin-bottom: 0px !important;">

	<div id="allinshow">

		</div>
 
  <br><b>只读取最近100条评论！</b><br>
  
  
  
	  <div class="comments vcomment" id="comments"></div>
    
	<script>
/**	 
	AV.init({
		//appId:"PW4p5yuQfOGT9EITp5LE5aAq-MdYXbMMI",appKey:"jvG1mwtdlCeGgyL1s4z4NIir" //nmsl
		//appId: "E7rWTTEsGSblT8OB06beui59-MdYXbMMI", appKey: "y4jlkd52FFbLb0kLALU0mrMm", //x4wj
		appId:'WbLE88qfAcz4hSI5GsQFRlzW-gzGzoHsz',  appKey:'ycqjmtEfUxuxD3IY97oRkrdO'
		//appid: '6BMsyigADmQmTmVot7Bvfedv-MdYXbMMI', appkey: 't9Qx24vbwvimWMK2wzceFrQX',
		//appId: 'ikEEo5XOYTytaqIUMsLaiisX-gzGzoHsz', appKey: 'CBx5lgfUldUe1i1qBC6m7k0K',
	});
	//console.log(window.AV);
	var query = new AV.Query("Comment");
	query.descending("createdAt");//升序
	query.find().then(function(data){
	  //查询的结果数据 data
	  //将data转成json格式
	 var jsondata = JSON.parse(JSON.stringify(data));
	console.log(data);
	function formatDate(time){
		var date = new Date(time);

		var year = date.getFullYear(),
			month = date.getMonth() + 1,//月份是从0开始的
			day = date.getDate(),
			hour = date.getHours(),
			min = date.getMinutes(),
			sec = date.getSeconds();
		 
		var newTime = year + '年' +
					month + '月' +
					day + '日' +
					hour + '点' +
					min + '分' ;//+
					//sec;
		return newTime;         
	}
	for(var p in data){//遍历json数组时，这么写p为索引，0,1
		//if(data[p].attributes.nick!="Administrator"){
			//console.log(data[p].attributes.url);
			$('#allinshow').append('<div><a href='
					+data[p].attributes.link
					+'><b>'
					+data[p].attributes.nick
					+"</b></a>&nbsp;于&nbsp;<b><a>"
					+formatDate(data[p].attributes.insertedAt)
					+"</a></b>&nbsp;在&nbsp;<b><a href='https://www.cz5h.com"
					+data[p].attributes.url.replace(" ", "%20")
					+"' target='_blank'>该页面</a></b>&nbsp;说："
					+data[p].attributes.comment
					+"</div>");

		//}
	}

	},function(err) {
	  //错误信息 err
	  //console.log('err');
	});
	**/ 
	</script>
    

 
 

<br/>
 
 
</html>
